{% extends 'base.html' %} 

{% block main %}

<!-- Main Banner -->
<div class="container my-5">
  <div class="row my-2">

    <div class="col-12">
      <h2 class="text-danger">Request History</h2>
      <table class="table">
        <thead>
          <tr>
            <th scope="col">#</th>
            <th scope="col">Requested Date</th>
            <th scope="col">Donation Date</th>
            <th scope="col">Blood Group</th>
            <th scope="col">Location</th>
            <th scope="col">Status</th>
            <th scope="col">Donated By</th>
          </tr>
        </thead>
        <tbody>

          {% for r in requested %}
          <tr>
            <th scope="row">{{ forloop.counter }}</th>
            <td>{{ r.requested_date }}</td>
            <td>{{ r.for_date }}</td>
            <td>{{ r.get_blood_group_display }}</td>
            <td>{{ r.district }}, {{ r.local_level }}</td>
            <td>
                {% if r.status == "pending" %}
                <span class="badge bg-danger">
                    {{ r.get_status_display }}
                </span>
                {% elif r.status == "verified" %}
                <span class="badge bg-warning">
                    {{ r.get_status_display }}
                </span>
                {% elif r.status == "completed"  %}
                <span class="badge bg-success">
                    {{ r.get_status_display }}
                </span>
                {% endif %}
            </td>
            {% if r.donated_by %}
                <td> <a class="alert-link" style="text-decoration: none;" href="{% url 'user_page' r.donated_by.id %}">{{ r.donated_by.first_name }} {{ r.donated_by.last_name }}</a> </td>
            {% endif %}
          </tr>
          {% endfor %}
         
        </tbody>
      </table>
    </div>

  </div>
</div>
<!-- End Main Banner -->

{% endblock %} 

{% block scripts %}
{% endblock %}